{"version":3,"file":"order.js","sources":["pages/order/order.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvb3JkZXIvb3JkZXIudnVl"],"sourcesContent":["<template>\r\n\t<scroll-view>\r\n\t\t<view style=\"padding: 20rpx,20rpx;\">\r\n\t\t\t<uni-row>\r\n\t\t\t\t<uni-col :span=\"4\">\r\n\t\t\t\t\t<view class=\"icon\">\r\n\t\t\t\t\t\t<uni-icons type=\"headphones\" size=\"30\"></uni-icons>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</uni-col>\r\n\t\t\t\t<uni-col :span=\"16\">\r\n\t\t\t\t\t<view style=\"display: flex;\r\n\t\t\t flex-direction: column; padding-left: 20rpx;\">\r\n\t\t\t\t\t\t<text style=\"font-weight: bold;font-size: 35rpx;\">{{machineName}}</text>\r\n\t\t\t\t\t\t<text>5元/半时</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</uni-col>\r\n\t\t\t\t<uni-col :span=\"4\">\r\n\t\t\t\t\t<view style=\"display: flex; justify-content: center; padding-top: 20rpx;\">\r\n\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</uni-col>\r\n\t\t\t</uni-row>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"divider\" />\r\n\t\t<view>\r\n\t\t\t<wu-calendar :insert=\"true\" type=\"week\" :fold=\"false\" startWeek=\"mon\" color=\"#f9cb14\"\r\n\t\t\t\t@change=\"calendarChange\"></wu-calendar>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"divider\" />\r\n\t\t<view>\r\n\t\t\t<uni-title type=\"h1\" title=\"已有预约时段\"></uni-title>\r\n\t\t\t<text style=\"font-weight: bold;font-size: 50rpx;\">这里是神秘条形图</text>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"divider\" />\r\n\t\t<view>\r\n\t\t\t<uni-title type=\"h1\" title=\"确认预约信息\"></uni-title>\r\n\t\t\t<view>\r\n\t\t\t\t<text>薄被，要在鱼窝过夜吗？</text>\r\n\t\t\t\t<uni-data-checkbox v-model=\"Data.isOvernight\" \r\n\t\t\t\t:localdata=\"option\" \r\n\t\t\t\t@change=\"setPrice()\"></uni-data-checkbox>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view v-if=\"Data.isOvernight\">\r\n\t\t\t\t<view style=\"padding-top: 20rpx;\">\r\n\t\t\t\t\t<view class=\"option\">\r\n\t\t\t\t\t\t<text>开始时间</text>\r\n\t\t\t\t\t\t<uni-datetime-picker v-model=\"Data.startTime\" :border=\"false\"\r\n\t\t\t\t\t\t\treturnType=\"timestamp\" hide-second=\"true\"></uni-datetime-picker>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<uni-row class=\"attention\">\r\n\t\t\t\t\t\t<uni-col :span=\"4\">\r\n\t\t\t\t\t\t\t<uni-icons type=\"checkbox\"\r\n\t\t\t\t\t\t\t size=\"30\"\r\n\t\t\t\t\t\t\tstyle=\"padding-left: 20rpx;\"></uni-icons>\r\n\t\t\t\t\t\t</uni-col>\r\n\t\t\t\t\t\t<uni-col :span=\"14\">预计时长：包夜！</uni-col>\r\n\t\t\t\t\t\t<uni-col :span=\"6\">费用：¥{{price}}</uni-col>\r\n\t\t\t\t\t</uni-row>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view v-else style=\"display: flex;flex-direction: column;\">\r\n\t\t\t\t<view style=\"display: flex; justify-content: space-between;\">\r\n\t\t\t\t\t<view class=\"option\">\r\n\t\t\t\t\t\t<text>开始时间</text>\r\n\t\t\t\t\t\t<uni-datetime-picker v-model=\"Data.startTime\" :border=\"false\"\r\n\t\t\t\t\t\t\treturnType=\"timestamp\" hide-second=\"true\"></uni-datetime-picker>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"option\">\r\n\t\t\t\t\t\t<text>结束时间</text>\r\n\t\t\t\t\t\t<uni-datetime-picker v-model=\"Data.endTime\" :border=\"false\"\r\n\t\t\t\t\t\t\treturnType=\"timestamp\" hide-second=\"true\"></uni-datetime-picker>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view style=\"padding-top: 20rpx;\">\r\n\t\t\t\t\t<uni-row class=\"attention\">\r\n\t\t\t\t\t\t<uni-col :span=\"4\">\r\n\t\t\t\t\t\t\t<uni-icons type=\"checkbox\" size=\"30\" style=\"padding-left: 20rpx;\"></uni-icons>\r\n\t\t\t\t\t\t</uni-col>\r\n\t\t\t\t\t\t<uni-col :span=\"14\">预计时长：{{totalTime}} 小时</uni-col>\r\n\t\t\t\t\t\t<uni-col :span=\"6\">费用：¥{{price}}</uni-col>\r\n\t\t\t\t\t</uni-row>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t</view>\r\n\t</scroll-view>\r\n\t<text>订单详情</text><br/>\r\n\t<text>{{Data}}</text>\r\n\r\n\t<view class=\"divider\" />\r\n\t<view style=\"display: flex;\r\n\tflex-direction: column; \r\n\tjustify-content: center; \r\n\talign-items: center;\">\r\n\r\n\t\t<view class=\"price\">\r\n\t\t\t<text>预计费用 </text>\r\n\t\t\t<text>¥{{price}}</text>\r\n\t\t</view>\r\n\t\t<view class=\"bt\" @click=\"submitOrder()\">\r\n\t\t\t<text>确认预约</text>\r\n\t\t</view>\r\n\t</view>\r\n\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n\timport dayjs from 'dayjs';\n\timport { ref, getCurrentInstance, onMounted, reactive } from 'vue';\r\n\tconst todo = uniCloud.importObject('todo')\r\n\tconst machineName = ref(\"\")\r\n\tinterface reservationData{\r\n\t\t\"userId\":String;\r\n\t\t\"machineId\":String;\r\n\t\t\"startTime\":String;\r\n\t\t\"endTime\":String;\r\n\t\t\"isOvernight\":Boolean;\r\n\t\t\"status\":String;\r\n\t\t\"notes\":String\r\n\t}\r\n\tconst Data = reactive<reservationData>({\r\n\t\t\"userId\":\"\",\r\n\t\t\"machineId\":\"\",\r\n\t\t\"startTime\":\"\",\r\n\t\t\"endTime\":\"\",\r\n\t\t\"isOvernight\":false,\r\n\t\t\"status\":\"pending\",\r\n\t\t\"notes\":\"\"\r\n\t})\r\n\tconst option = [\r\n\t\t{\r\n\t\t\t\"value\": false,\r\n\t\t\t\"text\": \"不要过夜\",\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"value\": true,\r\n\t\t\t\"text\": \"对！没错！我要过夜！\",\r\n\t\t}\r\n\t]\r\n\tconst price = ref(0)\r\n\tconst totalTime = ref(0)\r\n\tfunction setPrice() {\r\n\t\tif (Data.isOvernight == true) {\r\n\t\t\tprice.value = 50\r\n\t\t} else {\r\n\t\t\tprice.value = 0\r\n\t\t}\r\n\t}\r\n\tasync function submitOrder(){\r\n\t\tuni.__f__('log','at pages/order/order.vue:155',\"test\")\r\n\t\tif(Data.isOvernight){\r\n\t\t\tData.endTime = \"\"\r\n\t\t\tData.status = \"confirmed\"\r\n\t\t\tif(Data.startTime != \"\"){\r\n\t\t\t\tconst res = await todo.Reservation_Add(Data)\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tData.status = \"confirmed\"\r\n\t\t\tif(Data.startTime != \"\"){\r\n\t\t\t\tconst res = await todo.Reservation_Add(Data)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tfunction calendarChange(e){\r\n\t\tuni.__f__('log','at pages/order/order.vue:170',dayjs(e.fulldate).unix().toString());\r\n\t\tData.startTime = dayjs(e.fulldate)\r\n\t}\r\n\tonMounted(() => {\r\n\t\tconst instance = getCurrentInstance().proxy;\r\n\t\tconst eventChannel = instance.getOpenerEventChannel();\r\n\t\tconst res = uniCloud.getCurrentUserInfo('uni_id_token')\r\n\t\teventChannel.on('acceptDataFromOpenerPage', function (data) {\r\n\t\t\tuni.__f__('log','at pages/order/order.vue:178','acceptDataFromOpenerPage', data)\r\n\t\t\tmachineName.value = data.name\r\n\t\t\tData.machineId = data.id\r\n\t\t})\r\n\t\tuni.__f__('log','at pages/order/order.vue:182',machineName.value)\r\n\t\tuni.__f__('log','at pages/order/order.vue:183',Data.machineId)\r\n\t\tData.userId = res.uid\r\n\t})\r\n\t\r\n\t\r\n</script>\r\n\r\n<style>\r\n\t.divider {\r\n\t\theight: 2rpx;\r\n\t\tbackground-color: rgb(242, 242, 242);\r\n\t\tmargin-top: 15rpx;\r\n\t\tmargin-bottom: 15rpx;\r\n\t}\r\n\r\n\t.attention {\r\n\t\tbackground-color: rgb(253, 251, 231);\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\talign-self: center;\r\n\t\talign-content: center;\r\n\t\tborder-radius: 20rpx;\r\n\t\theight: 90rpx;\r\n\t}\r\n\r\n\t.bt {\r\n\t\tbackground-color: rgb(249, 203, 20);\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tborder-radius: 20rpx;\r\n\t\twidth: 80%;\r\n\t\theight: 80rpx;\r\n\t}\r\n\r\n\t.price {\r\n\t\tdisplay: flex;\r\n\t\twidth: 90%;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\r\n\t.option {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n</style>","import MiniProgramPage from 'D:/Project/YuwoApp/pages/order/order.vue'\nwx.createPage(MiniProgramPage)"],"names":["uniCloud","ref","reactive","uni","dayjs","onMounted","getCurrentInstance","MiniProgramPage"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAkHO,UAAA,OAAOA,cAAAA,GAAS,aAAa,MAAM;AACnC,UAAA,cAAcC,kBAAI,EAAE;AAU1B,UAAM,OAAOC,cAAAA,SAA0B;AAAA,MACtC,UAAS;AAAA,MACT,aAAY;AAAA,MACZ,aAAY;AAAA,MACZ,WAAU;AAAA,MACV,eAAc;AAAA,MACd,UAAS;AAAA,MACT,SAAQ;AAAA,IAAA,CACR;AACD,UAAM,SAAS;AAAA,MACd;AAAA,QACC,SAAS;AAAA,QACT,QAAQ;AAAA,MACT;AAAA,MACA;AAAA,QACC,SAAS;AAAA,QACT,QAAQ;AAAA,MACT;AAAA,IAAA;AAEK,UAAA,QAAQD,kBAAI,CAAC;AACb,UAAA,YAAYA,kBAAI,CAAC;AACvB,aAAS,WAAW;AACf,UAAA,KAAK,eAAe,MAAM;AAC7B,cAAM,QAAQ;AAAA,MAAA,OACR;AACN,cAAM,QAAQ;AAAA,MACf;AAAA,IACD;AACA,mBAAe,cAAa;AACvBE,oBAAAA,MAAA,MAAM,OAAM,gCAA+B,MAAM;AACrD,UAAG,KAAK,aAAY;AACnB,aAAK,UAAU;AACf,aAAK,SAAS;AACX,YAAA,KAAK,aAAa,IAAG;AACX,gBAAM,KAAK,gBAAgB,IAAI;AAAA,QAC5C;AAAA,MAAA,OACI;AACJ,aAAK,SAAS;AACX,YAAA,KAAK,aAAa,IAAG;AACX,gBAAM,KAAK,gBAAgB,IAAI;AAAA,QAC5C;AAAA,MACD;AAAA,IACD;AACA,aAAS,eAAe,GAAE;AACrBA,oBAAAA,MAAA,MAAM,OAAM,gCAA+BC,cAAM,MAAA,EAAE,QAAQ,EAAE,OAAO,SAAU,CAAA;AAC7E,WAAA,YAAYA,cAAAA,MAAM,EAAE,QAAQ;AAAA,IAClC;AACAC,kBAAAA,UAAU,MAAM;AACT,YAAA,WAAWC,iCAAqB,EAAA;AAChC,YAAA,eAAe,SAAS;AACxB,YAAA,MAAMN,cAAAA,GAAS,mBAAmB,cAAc;AACzC,mBAAA,GAAG,4BAA4B,SAAU,MAAM;AAC3DG,sBAAA,MAAI,MAAM,OAAM,gCAA+B,4BAA4B,IAAI;AAC/E,oBAAY,QAAQ,KAAK;AACzB,aAAK,YAAY,KAAK;AAAA,MAAA,CACtB;AACDA,oBAAA,MAAI,MAAM,OAAM,gCAA+B,YAAY,KAAK;AAChEA,oBAAA,MAAI,MAAM,OAAM,gCAA+B,KAAK,SAAS;AAC7D,WAAK,SAAS,IAAI;AAAA,IAAA,CAClB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvLF,GAAG,WAAWI,SAAe;"}