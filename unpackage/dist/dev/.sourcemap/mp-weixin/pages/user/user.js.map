{"version":3,"file":"user.js","sources":["pages/user/user.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdXNlci91c2VyLnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view>\r\n\t\t<view>\r\n\t\t\t<!--这一堆是预览里面用来显示用户信息的部分，就是橙色底的那一堆-->\r\n\t\t\t<uni-card isFull=\"\" style=\"background-color: orange;\">\r\n\t\t\t\t<template v-slot:title>\r\n\t\t\t\t\t<uni-row style=\"margin-top: 20rpx;\">\r\n\t\t\t\t\t\t<!--这边是头像，头像我觉得我已经调好了-->\r\n\t\t\t\t\t\t<uni-col :span=\"6\">\r\n\t\t\t\t\t\t\t<view class=\"avatar\">\r\n\t\t\t\t\t\t\t\t<!--我看了一下他这个src是支持绝对位置、相对位置、base64-->\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</uni-col>\r\n\t\t\t\t\t\t<!--这一块是用户名和UID，可能要调一下字体和间距-->\r\n\t\t\t\t\t\t<uni-col :span=\"16\">\r\n\t\t\t\t\t\t\t<view style=\"display: flex;flex-direction: column;\">\r\n\t\t\t\t\t\t\t\t<text>{{}}</text>\r\n\t\t\t\t\t\t\t\t<text>UID:{{}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</uni-col>\r\n\t\t\t\t\t\t<!--小齿轮-->\r\n\t\t\t\t\t\t<uni-col :span=\"2\">\r\n\t\t\t\t\t\t\t<uni-icons type=\"gear-filled\" size=\"30\" />\r\n\t\t\t\t\t\t</uni-col>\r\n\t\t\t\t\t</uni-row>\r\n\t\t\t\t</template>\r\n\t\t\t\t<!--这一块是白字的统计信息，应该要调一下字体-->\r\n\t\t\t\t<view style=\"display: flex; justify-content: space-around;\">\r\n\t\t\t\t\t<view class=\"card\">\r\n\t\t\t\t\t\t<text>{{}}</text>\r\n\t\t\t\t\t\t<text>总使用次数</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"card\">\r\n\t\t\t\t\t\t<text>{{}}</text>\r\n\t\t\t\t\t\t<text>总使用时长</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"card\">\r\n\t\t\t\t\t\t<text>{{}}</text>\r\n\t\t\t\t\t\t<text>总消费金额</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</uni-card>\r\n\t\t</view>\r\n\r\n\t\t<!--这一堆是那四个功能按钮，应该没有东西要调-->\r\n\t\t<view style=\"display: felx; flex-direction: column;\">\r\n\r\n\t\t\t<uni-card>\r\n\t\t\t\t<view style=\"display: flex; justify-content: space-around;\">\r\n\t\t\t\t\t<view class=\"card\">\r\n\t\t\t\t\t\t<view class=\"usingbox\">\r\n\t\t\t\t\t\t\t<uni-icons type=\"checkbox\" size=\"30\"></uni-icons>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<text>使用中</text>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"card\">\r\n\t\t\t\t\t\t<view class=\"orderingbox\">\r\n\t\t\t\t\t\t\t<uni-icons type=\"calendar\" size=\"30\"></uni-icons>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<text>预约中</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"card\">\r\n\t\t\t\t\t\t<view class=\"favoritebox\">\r\n\t\t\t\t\t\t\t<uni-icons type=\"heart\" size=\"30\"></uni-icons>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<text>收藏</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"card\">\r\n\t\t\t\t\t\t<view class=\"servicebox\">\r\n\t\t\t\t\t\t\t<uni-icons type=\"chatbubble\" size=\"30\"></uni-icons>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<text>?客服</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!--你有没有发现这四个功能界面对应的页面没有设计？-->\r\n\t\t\t</uni-card>\r\n\r\n\t\t\t<!--这块是最近订单，可能要调下字体-->\r\n\t\t\t<!--用v-for遍历订单数组实现的-->\r\n\t\t\t<uni-card>\r\n\t\t\t\t<!--uni-card的自定义标题，详情文档-->\r\n\t\t\t\t<template v-slot:title>\r\n\t\t\t\t\t<uni-list>\r\n\t\t\t\t\t\t<uni-list-item showArrow title=\"最近订单\" />\r\n\t\t\t\t\t</uni-list>\r\n\t\t\t\t</template>\r\n\t\t\t\t\r\n\t\t\t\t<view v-for=\"data in Data\" :key=\"data._id\">\r\n\t\t\t\t\t<uni-row>\r\n\t\t\t\t\t\t<uni-col :span=\"6\">\r\n\t\t\t\t\t\t\t<view class=\"orderbox\">\r\n\t\t\t\t\t\t\t\t<uni-icons type=\"contact\" size=\"30\"></uni-icons>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</uni-col>\r\n\t\t\t\t\t\t<uni-col :span=\"12\">\r\n\t\t\t\t\t\t\t<view style=\"display: flex;flex-direction: column;\">\r\n\t\t\t\t\t\t\t\t<text>{{data.machineId}}</text>\r\n\t\t\t\t\t\t\t\t<uni-dateformat :date='data.startTime'></uni-dateformat>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</uni-col>\r\n\t\t\t\t\t\t<uni-col :span=\"6\">\r\n\t\t\t\t\t\t\t<view style=\"display: flex;flex-direction: column;\">\r\n\t\t\t\t\t\t\t\t<text v-if=\"data.status == 1\" style=\"color: greenyellow;\">已完成</text>\r\n\t\t\t\t\t\t\t\t<text v-else style=\"color: red;\">未完成</text>\r\n\t\t\t\t\t\t\t\t<text>{{data.status}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</uni-col>\r\n\t\t\t\t\t</uni-row>\r\n\t\t\t\t\t<view class=\"divider\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t</uni-card>\r\n\r\n\t\t\t<!--最底下两个功能按钮-->\r\n\t\t\t<uni-card>\r\n\t\t\t\t<uni-list-item showArrow title=\"消息通知\" />\r\n\t\t\t\t<uni-list-item showArrow title=\"帮助中心\" />\r\n\t\t\t</uni-card>\r\n\t\t</view>\r\n\t\t<button @click=\"logOut()\">退出登录</button>\r\n\t</view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\n\timport { onMounted, reactive, ref } from 'vue'\r\n\t//我把测试用的用户信息用pinia存上了，详情看那个ts文件\r\n\timport { useProfileStroe } from '@/stores/userProfileStore'\r\n\tconst todo = uniCloud.importObject('todo')\r\n\tconst res = uniCloud.getCurrentUserInfo('uni_id_token')\r\n\tconst profile = ref({})\r\n\tinterface reservationData {\r\n\t\t_id:String;\r\n\t\tmachineId:String;\r\n\t\tisOvernight:Boolean;\r\n\t\tstatus:String;\r\n\t\tstartTime:String;\r\n\t}\r\n\tconst Data = ref<reservationData[]>([])\r\n\t\r\n\tasync function getReservationData() {\r\n\t\ttry {\r\n\t\t\tlet result = await todo.GetReservationInfo(res.uid)\r\n\t\t\tuni.__f__('log','at pages/user/user.vue:144',result.data)\r\n\t\t\tData.value = result.data\r\n\t\t} catch {}\r\n\t}\r\n\t\r\n\tconst uniIdCo = uniCloud.importObject('uni-id-co')\r\n\t//这是测试用的订单信息\r\n\tconst testOrderData = reactive([\r\n\t\t{\r\n\t\t\tmachineName: \"IIDX\",\r\n\t\t\tmachineID: \"机台1号\",\r\n\t\t\torderTime: \"2024-02-15 15:00\",\r\n\t\t\torderStatus: 0,\r\n\t\t\torderID: \"002\",\r\n\t\t\torderPrice: \"$5.99\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tmachineName: \"SDVX\",\r\n\t\t\tmachineID: \"机台2号\",\r\n\t\t\torderTime: \"2024-02-14 18:30\",\r\n\t\t\torderStatus: 1,\r\n\t\t\torderID: \"001\",\r\n\t\t\torderPrice: \"$5.99\"\r\n\t\t}\r\n\t])\r\n\tasync function logOut() {\r\n\t\ttry {\r\n\t\t\tawait uniIdCo.logout()\r\n\t\t\t// 3. 清除本地 token 和用户信息\r\n\t\t\tuni.removeStorageSync('uni_id_token');\r\n\t\t\tuni.removeStorageSync('uni_id_token_expired');\r\n\t\t\t// 4. 更新全局状态（Vuex/Pinia）\r\n\r\n\t\t\t// 5. 跳转到登录页\r\n\t\t\tuni.reLaunch({\r\n\t\t\t\turl: '/uni_modules/uni-id-pages/pages/login/login-withpwd'\r\n\t\t\t});\r\n\r\n\t\t\t// 6. （可选）处理成功提示\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '退出成功',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t} catch { }\r\n\t}\r\n\tonMounted(() => {\r\n\t\tgetReservationData()\r\n\t})\r\n</script>\r\n\r\n<style>\r\n\t.card {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t\talign-content: center;\r\n\t\talign-items: center;\r\n\t\talign-self: center;\r\n\t}\r\n\r\n\t.usingbox {\r\n\t\tbackground-color: rgb(255, 247, 237);\r\n\t\theight: 120rpx;\r\n\t\twidth: 120rpx;\r\n\t\tborder-radius: 40rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-content: center;\r\n\t\talign-items: center;\r\n\t\talign-self: center;\r\n\t}\r\n\r\n\t.orderingbox {\r\n\t\tbackground-color: rgb(238, 245, 254);\r\n\t\theight: 120rpx;\r\n\t\twidth: 120rpx;\r\n\t\tborder-radius: 40rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-content: center;\r\n\t\talign-items: center;\r\n\t\talign-self: center;\r\n\t}\r\n\r\n\t.favoritebox {\r\n\t\tbackground-color: rgb(249, 244, 254);\r\n\t\theight: 120rpx;\r\n\t\twidth: 120rpx;\r\n\t\tborder-radius: 40rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-content: center;\r\n\t\talign-items: center;\r\n\t\talign-self: center;\r\n\t}\r\n\r\n\t.servicebox {\r\n\t\tbackground-color: rgb(239, 252, 243);\r\n\t\theight: 120rpx;\r\n\t\twidth: 120rpx;\r\n\t\tborder-radius: 40rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-content: center;\r\n\t\talign-items: center;\r\n\t\talign-self: center;\r\n\t}\r\n\r\n\t.orderbox {\r\n\t\tbackground-color: rgb(242, 243, 245);\r\n\t\theight: 100rpx;\r\n\t\twidth: 100rpx;\r\n\t\tborder-radius: 40rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-content: center;\r\n\t\talign-items: center;\r\n\t\talign-self: center;\r\n\t}\r\n\r\n\t.divider {\r\n\t\theight: 2rpx;\r\n\t\tbackground-color: rgb(242, 242, 242);\r\n\t\tmargin-top: 15rpx;\r\n\t\tmargin-bottom: 15rpx;\r\n\t}\r\n\r\n\t.avatar {\r\n\t\twidth: 160rpx;\r\n\t\t/* 宽度与高度需相同 */\r\n\t\theight: 160rpx;\r\n\t\t/* 高度与宽度需相同 */\r\n\t\tborder-radius: 50%;\r\n\t\t/* 关键属性 */\r\n\t\toverflow: hidden;\r\n\t\t/* 确保内容被裁剪为圆形 */\r\n\t}\r\n\r\n\timage {\r\n\t\twidth: 160rpx;\r\n\t\t/* 宽度与高度需相同 */\r\n\t\theight: 160rpx;\r\n\t\t/* 高度与宽度需相同 */\r\n\t}\r\n</style>","import MiniProgramPage from 'D:/Project/YuwoApp/pages/user/user.vue'\nwx.createPage(MiniProgramPage)"],"names":["uniCloud","ref","uni","reactive","onMounted","MiniProgramPage"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAgIO,UAAA,OAAOA,cAAAA,GAAS,aAAa,MAAM;AACnC,UAAA,MAAMA,cAAAA,GAAS,mBAAmB,cAAc;AACtCC,kBAAAA,IAAI,CAAA,CAAE;AAQhB,UAAA,OAAOA,kBAAuB,CAAA,CAAE;AAEtC,mBAAe,qBAAqB;AAC/B,UAAA;AACH,YAAI,SAAS,MAAM,KAAK,mBAAmB,IAAI,GAAG;AAClDC,sBAAA,MAAI,MAAM,OAAM,8BAA6B,OAAO,IAAI;AACxD,aAAK,QAAQ,OAAO;AAAA,MAAA,QACb;AAAA,MAAC;AAAA,IACV;AAEM,UAAA,UAAUF,cAAAA,GAAS,aAAa,WAAW;AAE3BG,2BAAS;AAAA,MAC9B;AAAA,QACC,aAAa;AAAA,QACb,WAAW;AAAA,QACX,WAAW;AAAA,QACX,aAAa;AAAA,QACb,SAAS;AAAA,QACT,YAAY;AAAA,MACb;AAAA,MACA;AAAA,QACC,aAAa;AAAA,QACb,WAAW;AAAA,QACX,WAAW;AAAA,QACX,aAAa;AAAA,QACb,SAAS;AAAA,QACT,YAAY;AAAA,MACb;AAAA,IAAA,CACA;AACD,mBAAe,SAAS;AACnB,UAAA;AACH,cAAM,QAAQ;AAEdD,4BAAI,kBAAkB,cAAc;AACpCA,4BAAI,kBAAkB,sBAAsB;AAI5CA,sBAAAA,MAAI,SAAS;AAAA,UACZ,KAAK;AAAA,QAAA,CACL;AAGDA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACN;AAAA,MAAA,QACM;AAAA,MAAE;AAAA,IACX;AACAE,kBAAAA,UAAU,MAAM;AACI;IAAA,CACnB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7LF,GAAG,WAAWC,SAAe;"}