{"bsonType":"object","required":["productId","type","quantity","beforeStock","afterStock","reason","operator"],"permission":{"read":true,"create":true,"update":true,"delete":false},"properties":{"_id":{"description":"ID，系统自动生成"},"productId":{"title":"商品ID","bsonType":"string","description":"商品ID","foreignKey":"products._id"},"variantId":{"title":"变体ID","bsonType":"string","description":"商品变体ID"},"type":{"title":"变更类型","bsonType":"string","description":"库存变更类型：in-入库，out-出库，adjust-调整","enum":[{"value":"in","text":"入库"},{"value":"out","text":"出库"},{"value":"adjust","text":"调整"}]},"quantity":{"title":"变更数量","bsonType":"int","description":"变更数量（正数）"},"beforeStock":{"title":"变更前库存","bsonType":"int","description":"变更前的库存数量"},"afterStock":{"title":"变更后库存","bsonType":"int","description":"变更后的库存数量"},"reason":{"title":"变更原因","bsonType":"string","description":"库存变更原因"},"operator":{"title":"操作人","bsonType":"string","description":"操作人ID","foreignKey":"uni-id-users._id"},"orderNo":{"title":"关联订单号","bsonType":"string","description":"关联的订单号（出库时）"},"create_time":{"title":"创建时间","bsonType":"timestamp","description":"创建时间","forceDefaultValue":{"$env":"now"}},"note":{"title":"备注信息","bsonType":"string","description":"备注信息","trim":"both"}},"version":"0.0.1"}