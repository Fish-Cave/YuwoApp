{"bsonType":"object","required":["orderId","operatorId","operatorName","editType","reason","editTime"],"properties":{"_id":{"bsonType":"string","description":"ID，主键"},"orderId":{"bsonType":"string","description":"被修改的订单ID","foreignKey":"fishcave-orders._id","parentKey":"_id"},"operatorId":{"bsonType":"string","description":"操作人用户ID","foreignKey":"uni-id-users._id","parentKey":"_id"},"operatorName":{"bsonType":"string","description":"操作人昵称或用户名"},"editType":{"bsonType":"string","description":"修改类型，例如 '订单信息修改', '状态变更', '金额调整'"},"changes":{"bsonType":"object","description":"具体修改内容，键值对形式，记录 'from' 和 'to' 值","properties":{"status":{"bsonType":"object","properties":{"from":{"bsonType":"string"},"to":{"bsonType":"string"}}},"totalFee":{"bsonType":"object","properties":{"from":{"bsonType":"string"},"to":{"bsonType":"string"}}},"startTime":{"bsonType":"object","properties":{"from":{"bsonType":"string"},"to":{"bsonType":"string"}}},"endTime":{"bsonType":"object","properties":{"from":{"bsonType":"string"},"to":{"bsonType":"string"}}}},"additionalProperties":true},"reason":{"bsonType":"string","description":"修改原因"},"editTime":{"bsonType":"long","description":"修改时间戳 (毫秒)","defaultValue":{"$env":"now"}}},"permission":{"read":"{'admin' in auth.role || doc.operatorId == auth.uid}","create":"{'admin' in auth.role}","update":false,"delete":"{'admin' in auth.role}"}}